# .aliases
# vim:ft=sh:
# called by .bashrc

if [ -x /usr/local/bin/colorls ]; then
  alias ls='/usr/local/bin/colorls'
fi

alias ll='ls -AalFh'

movetrash() {
  if [ -d ~/.trash ]; then
    mkdir ~/.trash
  fi
  mv "$*" ~/.trash;
}

path() {
  echo $PATH | tr ':' '\n'
}

manpath() {
  echo $MANPATH | tr ':' '\n'
}

tmux_self() {
  (export TERM=screen-256color-bce && tmux attach || tmux new)
}

#ll() {
#  ls --color=auto --group-directories-first --sort=extension -FAqlh "$@"
#}

dir() {
#  ls --color=always --group-directories-first --sort=extension -FAqlh "$@" | less
  {
    ll "$@" | egrep "^d" \
  &&
    ll "$@" | egrep -v "^d|total" \
  &&
    ll "$@" | egrep "total"
  } | $PAGER
}

clearcache() {
  if [ -d /tmp/cache ]; then
    rm -f /tmp/cache/{0,1,2,3}*.cache
    rm -f /tmp/cache/{4,5,6,7}*.cache
    rm -f /tmp/cache/{8,9,a,b}*.cache
    rm -f /tmp/cache/{c,d,e,f}*.cache
  elif [ -d /var/www/tmp/cache ]; then
    rm -f /var/www/tmp/cache/{0,1,2,3}*.cache
    rm -f /var/www/tmp/cache/{4,5,6,7}*.cache
    rm -f /var/www/tmp/cache/{8,9,a,b}*.cache
    rm -f /var/www/tmp/cache/{c,d,e,f}*.cache
  else
    echo "no cache directories exist"
  fi
}

clearmodps() {
  sudo /sbin/apachectl stop
  sudo mv /var/www/mod_pagespeed/cache /var/www/mod_pagespeed/cache.old
  sudo /sbin/apachectl start
  sudo rm -rf /var/www/mod_pagespeed/cache.old
}

sssh() {
  (export TERM=screen-256color-bce && export AUTOSSH_PORT=0 && autossh "$@" -t 'tmux attach || tmux new')
}

ssh_cor() {
  (export AUTOSSH_PORT=0 && autossh cor -t 'tmux attach || tmux new')
}

ssh_demo() {
  (export TERM=screen-256color-bce && export AUTOSSH_PORT=0 && autossh demo -t 'tmux attach || tmux new')
}

ssh_mc() {
  (export TERM=screen-256color-bce && export AUTOSSH_PORT=0 && autossh mc -t 'tmux attach || tmux new')
}

ssh_newdemo() {
  (export TERM=screen-256color-bce && export AUTOSSH_PORT=0 && autossh web -t 'tmux attach || tmux new')
}

ssh_mac() {
  (export TERM=screen-256color-bce && export AUTOSSH_PORT=0 && autossh mac -t '/usr/local/bin/tmux attach || /usr/local/bin/tmux new')
}

mountpub() {
  sudo mount -t cifs -o username=ARI/darceneaux,rw,file_mode=0666,dir_mode=0777 \\\\10.10.10.12\\Public /mnt/Public
}

mountfr() {
  sudo mount -t cifs -o username=ARI/darceneaux,rw,file_mode=0666,dir_mode=0777 \\\\10.10.10.12\\Fundraising /mnt/Fundraising
}

# delete grep cache, not sure how to generalize it
dgc() {
  rm -rf $(grep -l '<!-- http://aynrandlexicon.com/lexicon/quote_of_the_day.html' /var/www/libraries/cache/*.cache)
  curl -I -s http://aynrandlexicon.com/lexicon/quote_of_the_day.html > /dev/null
}

tarlm() {
  if [ ! -f $1.access.$2.tgz ]; then
    sudo tar -zvcf $1.access.$2.tgz $1.access.$2*.log && sudo rm $1.access.$2*.log
  fi
  if [ ! -f $1.error.$2.tgz ]; then
    sudo tar -zvcf $1.error.$2.tgz $1.error.$2*.log && sudo rm $1.error.$2*.log
  fi
}

hgdiff() {
#  vimdiff -c 'map q :qa!<CR>' < (hg cat "$1") "$1"
  vimdiff -c 'map q :qa!<CR>' < hg cat "$1" "$1"
}

playtime() {
  if [ -x /usr/local/bin/soxi ]; then
    soxi -d $@ 2>&1
  else
    echo "soxi is not installed"
  fi
}

alias rm='movetrash'
alias key='man -k'
alias info='info --vi-keys'
alias cycapache='/usr/bin/sudo /usr/bin/pkill -SIGQUIT -U www; /bin/sleep 2; /usr/bin/sudo /usr/sbin/apachectl start'
alias forethought='ssh ari@216.241.32.130'
