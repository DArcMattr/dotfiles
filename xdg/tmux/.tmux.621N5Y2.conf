#!/bin/sh

sudo sh -c " \
  service nginx start ; \
  service mysql start ; \
  service php8.1-fpm start"
# lsyncd /var/www/vhosts/lsyncd.conf
mailcatcher

tmux set-option -ga terminal-overrides ",*:Tc"

tmux new-window -t "${SESSION}":1
tmux send-keys -t "${SESSION}":1 "htop" C-m
tmux rename-window -t "${SESSION}":1 "htop"

tmux new-window -t "${SESSION}:2" -c "/var/www/vhosts/api-tracker" \; \
  split-window -v -l 25 -t "${SESSION}:2.0" -c "/var/www/vhosts/api-tracker" \; \
  split-window -v -l 25 -t "${SESSION}:2.0" -c "/var/www/vhosts/api-tracker" \; \
  split-window -h -p 50 -t "${SESSION}:2.1" -b -c "/var/www/vhosts/api-tracker"
tmux rename-window -t "${SESSION}:2" "API"
tmux select-pane -t "${SESSION}:2.0"

tmux send-keys -t ${SESSION}:2.1 "cake console" C-m
tmux send-keys -t ${SESSION}:2.2 "mysql --login-path=tracker" C-m
tmux send-keys -t ${SESSION}:2.3 "tail -F logs/error.log" C-m
