" vim:et sw=2 ts=2
if g:localvimrc_sourced_once_for_file
  finish
endif

let g:LanguageClient_rootMarkers = ['config.php']

if g:localvimrc_sourced_once
  finish
endif

if exists( "g:vdebug_options" )
  let g:vdebug_options['debug_file'] = '~/vdebug_log'
  let g:vdebug_options['debug_file_level'] = 2
endif

let g:ale_php_phpcs_standard = 'PSR2R'
let g:ale_php_phpcbf_standard = 'PSR2R'

augroup PROJECT
  autocmd!

  autocmd BufNewFile,BufRead,BufEnter * set textwidth=100
  autocmd BufEnter * execute 'match OverLength /\%'. (&textwidth + 1) .'v.*/'
augroup END

augroup PHP
  autocmd!
  "autocmd BufNewFile,BufRead,BufEnter *.php set syn=wordpress
  "autocmd BufWritePost *.php silent !phpcbf --standard=PSR2R %

  autocmd FileType php let b:tagcommands['php'] = {
  \   'tagfile': '/var/www/vhosts/local.theofficeexpress.com/php.tags',
  \   'args': '--fields=+aimlS --PHP-kinds=+cdfint-av',
  \   'files': '/var/www/vhosts/local.theofficeexpress.com/htdocs/'
  \ }
augroup END

augroup JS
  autocmd!

  autocmd FileType javascript let b:tagcommands['javascript'] = {
  \   'tagfile': '/var/www/vhosts/local.theofficeexpress.com/javascript.tags',
  \   'args': '',
  \   'files': '/var/www/vhosts/local.theofficeexpress.com/htdocs/'
  \ }
augroup END
